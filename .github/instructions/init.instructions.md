我正在將一個舊的 .NET WinForm 專案轉換成 Tauri + Rust 專案，它符合以下規格：

## 前端部份

- 使用 Vue.js
- Tailwind CSS
- 一頁式設計，沒有 route

## 後端部份

- 使用 Rust
- 使用以下的函式庫：
  - ffmpeg-sidecar: https://crates.io/crates/ffmpeg-sidecar
  - yt-dlp: https://crates.io/crates/yt-dlp

## 其它

- 需要撰寫 GitHub Workflow 自動發佈 Release，包含 Windows 版本和 Linux flatpak 版本。

## Q&A

好的，在開始將您的 .NET WinForm 專案轉換為 Tauri + Rust 專案之前，我想先釐清一些需求細節，以確保新的實作能符合您的期望。請您抽空回覆以下問題：

**關於核心功能與使用者介面：**

Q: 舊版應用程式的介面包含了影片連結輸入、開始/結束時間、輸出目錄、格式選擇、瀏覽器 Cookie 選項等。在新的 Vue.js 單頁應用程式中，您對這些功能的介面佈局和互動方式是否有特定的期望或需要調整的地方？
A: 移除 瀏覽器 Cookie 選項，其它的所有 UI layout 設計都照舊版的設計即可。

Q: 對於下載進度、錯誤訊息、以及 yt-dlp 和 FFmpeg 的依賴狀態檢查 (例如：舊版中的 ❓, ❌, ⌛, ✔️, 😕 等圖示)，您希望在新介面中如何呈現給使用者？

A: 新的程式只有一頁式設計，這部份改成完全只寫 Log，並且在 Log 中顯示進度和錯誤訊息。

Q: 舊版有「Log Verbose」的選項來顯示詳細日誌。新版是否也需要此功能？如果是，日誌應該主要顯示在介面上，還是儲存到檔案中，或者兩者都需要？
A: 需要這個功能。顯示在介面上，不需要儲存到檔案中。介面需要是可選取的文字框，讓使用者可以選取 Log 的內容來複製。

**關於相依性套件管理：**

Q: 舊版應用程式會自動下載 yt-dlp 和 FFmpeg 執行檔。對於新的 Rust 後端，您希望 `ffmpeg-sidecar` 和 `yt-dlp` crate 如何處理其底層的 FFmpeg 和 yt-dlp 執行檔？是希望它們：
    * 捆綁在最終的應用程式中？
    * 在應用程式首次執行或需要時自動下載？
    * 依賴使用者系統上已安裝的版本？
A: 透過 `yt-dlp` crate 來下載 yt-dlp and ffmpeg，在應用程式偵測不到 yt-dlp 和 ffmpeg 時自動下載，並且在應用程式中提供選項讓使用者可以選擇是否要重新下載。

Q: 若選擇自動下載，下載的來源和版本選擇邏輯是否需要與舊版保持一致？
A: 不指定版本。
    This is the sample code to install ffmpeg and yt-dlp:
    ```rust
    use yt_dlp::Youtube;
    use std::path::PathBuf;
    
    #[tokio::main]
    pub async fn main() -> Result<(), Box<dyn std::error::Error>> {
        let executables_dir = PathBuf::from("libs");
        let output_dir = PathBuf::from("output");
    
        let fetcher = Youtube::with_new_binaries(executables_dir, output_dir).await?;
        Ok(())
    }
    ```

**關於設定與資料持久化：**

Q: 舊版應用程式會儲存使用者的設定，如輸出目錄、偏好格式、瀏覽器選擇、以及是否啟用詳細日誌。在新版的 Tauri 應用程式中，這些設定以及其他可能的偏好設定，您期望如何儲存？
A: 儲存在本地設定檔，以 Tauri 的標準做法來儲存設定。

**關於特定功能的移植與調整：**

**影片連結與時間處理：**
    Q: 舊版能夠解析標準 YouTube 影片連結以及 YouTube Clip 連結，並自動填入影片 ID、開始和結束時間。新版是否需要完整保留這些解析邏輯？
    A: 需要保留這些解析邏輯。

    Q: 對於時間的輸入格式 (例如 `HH:MM:SS`、`MM:SS`、純秒數)，新版是否需要支援與舊版相同的彈性？
    A: 需要支援與舊版相同的彈性。

**下載選項：**
    Q: 舊版支援從瀏覽器讀取 Cookie 以便下載會員限定或私人影片。新版是否仍需要此功能？
    A: 不要，此功能移除。因為我們要跨平台，這個功能會無法實作。
  
    Q: 舊版允許使用者指定下載的影片/音訊格式代碼 (例如 `303+251`)，並提及影片最終會轉為 mp4。新版是否需要保留此格式指定功能以及後續的轉檔邏輯？
    A: 需要保留此格式指定功能，並且後續的轉檔邏輯也要保留。

**輸出檔案：**
    Q: 舊版有其特定的輸出檔案命名規則 (包含日期、標題、影片ID、開始結束時間等)。新版是否需要沿用此命名規則，或是有新的需求？
    A: 沿用舊版的命名規則。

    Q: 下載完成後，舊版會嘗試開啟輸出檔案所在的資料夾。新版是否也需要此功能？
    A: 需要這個功能。

**國際化 (i18n)：**
    Q: 舊版專案包含了中文的資源檔。新版的 Vue.js 前端是否也需要支援多國語言？初期需要支援哪些語言？
    A: 需要支援多國語言，初期需要支援中文和英文。舊版是以 C# 的資源檔來做國際化，但是在新版中需要改為 Vue 的 i18n 實作方式。

**關於錯誤處理與操作流程：**

Q: 在下載過程中，舊版允許使用者取消操作。新版是否也需要提供取消下載的功能？
A: 需要這個功能。

Q: 對於下載過程中可能發生的錯誤 (如網路問題、FFmpeg 處理失敗、影片無法存取等)，您期望應用程式如何通知使用者，以及如何記錄這些錯誤？
A: 
    1. 錯誤訊息需要顯示在 Log 中。
    2. 錯誤訊息彈出視窗顯示。

**關於 Tauri 框架的特定功能：**

Q: Tauri 框架提供了一些原生應用程式的功能，例如系統匣圖示、原生通知、自動更新等。您對這些功能是否有特定的整合需求或期望？
A: 
    1. 系統匣圖示：不需要。
    2. 原生通知：需要在下載完成後顯示通知。
    3. 自動更新：不需要支援自動更新功能。

**關於專案範圍：**

Q: 舊版 `README.md` 中提到應用程式理論上可以支援 yt-dlp 所支援的任何網站，但主要還是針對 YouTube。新專案的主要目標是僅限於 YouTube 影片的下載，還是也希望廣泛支援 yt-dlp 的其他來源？
A: 和原版一樣，主要針對 YouTube 影片的下載，並且理論上可以支援 yt-dlp 所支援的任何網站。事實上這個功能只需要彈出警示視窗告訴使用者這個功能是實驗性的，並且不保證能夠正常運作即可。訊息文字和原版一樣。然後將網址傳給 yt-dlp 即可。
